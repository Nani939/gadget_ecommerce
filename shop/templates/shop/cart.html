{% extends "base.html" %}
{% load static %}
{% block title %}Cart{% endblock %}
{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="{% static 'img/favicon.ico' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
<h1>Your Cart</h1>

{% if cart_items %}
<table>
  <thead><tr><th>Product</th><th>Qty</th><th>Price</th><th>Line Total</th><th></th></tr></thead>
  <tbody>
  {% for item in cart_items %}
    <tr>
      <td>{{ item.product.name }}</td>
      <td>
        <form method="post" action="{% url 'shop:update_quantity' item.product.id %}">
          {% csrf_token %}
          <input type="number" name="quantity" min="1" value="{{ item.quantity }}" style="width:70px">
          <button type="submit">Update</button>
        </form>
      </td>
      <td>₹{{ item.product.price }}</td>
      <td>₹{{ item.total }}</td>
      <td>
        <a href="{% url 'shop:remove_from_cart' item.product.id %}">Remove</a>
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>

<p><strong>Total:</strong> ₹{{ total_price }}</p>
<p><a href="{% url 'shop:checkout' %}">Proceed to Checkout</a></p>
{% else %}
<p>Your cart is empty.</p>
{% endif %}
{% endblock %}
