{% extends "base.html" %}
{% load static %}

{% block title %}Bulk Order - Gadget Shop{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/amazon-style.css' %}">
{% endblock %}

{% block content %}
<div class="amazon-container">
    <!-- Bulk Order Header -->
    <div class="bulk-header">
    <h1 class="bulk-header-title">📊 Bulk Order</h1>
    <p class="bulk-header-desc">Perfect for businesses and large quantity purchases</p>
    </div>

    <!-- Upload Form -->
    <div class="bulk-upload-box">
        <h2 class="bulk-upload-title">📄 Upload Your Order File</h2>
        
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            
            <div class="upload-zone" onclick="document.getElementById('bulk_file').click()">
                <div class="upload-zone-icon">📁</div>
                <h3>Click to upload or drag & drop</h3>
                <p>Upload CSV file with your bulk order</p>
                <p class="upload-zone-desc">Supported format: CSV (ProductID, Quantity)</p>
            </div>
            
            <input type="file" id="bulk_file" name="bulk_file" accept=".csv" class="file-input">
            
            <div class="bulk-upload-submit-row">
                <button type="submit" class="amazon-btn amazon-btn-primary bulk-upload-submit-btn" title="Process Bulk Order">
                    📊 Process Bulk Order
                </button>
            </div>
        </form>
    </div>

    <!-- Sample Format -->
    <div class="bulk-sample-box">
        <h2 class="bulk-sample-title">📋 CSV Format Example</h2>
        
        <div class="sample-table">
            <table class="sample-table-main">
                <thead>
                    <tr class="sample-table-header-row">
                        <th class="sample-table-th">Product ID</th>
                        <th class="sample-table-th">Quantity</th>
                        <th class="sample-table-th">Notes (Optional)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="sample-table-row-alt">
                        <td class="sample-table-td">1</td>
                        <td class="sample-table-td">5</td>
                        <td class="sample-table-td">iPhone 15 Pro</td>
                    </tr>
                    <tr>
                        <td class="sample-table-td">3</td>
                        <td class="sample-table-td">10</td>
                        <td class="sample-table-td">AirPods Pro</td>
                    </tr>
                    <tr class="sample-table-row-alt">
                        <td class="sample-table-td">7</td>
                        <td class="sample-table-td">2</td>
                        <td class="sample-table-td">MacBook Pro</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="bulk-sample-download-row">
            <a href="data:text/csv;charset=utf-8,Product ID,Quantity,Notes%0A1,5,iPhone 15 Pro%0A3,10,AirPods Pro%0A7,2,MacBook Pro" 
               download="bulk_order_template.csv" 
               class="amazon-btn amazon-btn-secondary bulk-sample-download-btn" title="Download CSV template">
                📥 Download Template
            </a>
        </div>
    </div>

    <!-- Business Features -->
    <div class="business-features">
        <div class="business-card">
            <div class="business-card-icon">💼</div>
            <h3>Business Discounts</h3>
            <p>Get special pricing for bulk orders over ₹50,000</p>
        </div>
        
        <div class="business-card">
            <div class="business-card-icon">🚚</div>
            <h3>Priority Delivery</h3>
            <p>Fast-track delivery for business orders</p>
        </div>
        
        <div class="business-card">
            <div class="business-card-icon">📊</div>
            <h3>Order Analytics</h3>
            <p>Detailed reports and purchase analytics</p>
        </div>
        
        <div class="business-card">
            <div class="business-card-icon">🎯</div>
            <h3>Dedicated Support</h3>
            <p>Priority customer support for business accounts</p>
        </div>
    </div>
</div>

<script>
// Drag and drop functionality
const uploadZone = document.querySelector('.upload-zone');
const fileInput = document.getElementById('bulk_file');

uploadZone.addEventListener('dragover', function(e) {
    e.preventDefault();
    this.classList.add('dragover');
});

uploadZone.addEventListener('dragleave', function(e) {
    e.preventDefault();
    this.classList.remove('dragover');
});

uploadZone.addEventListener('drop', function(e) {
    e.preventDefault();
    this.classList.remove('dragover');
    
    const files = e.dataTransfer.files;
    if (files.length > 0) {
        fileInput.files = files;
        updateFileName(files[0].name);
    }
});

fileInput.addEventListener('change', function(e) {
    if (e.target.files.length > 0) {
        updateFileName(e.target.files[0].name);
    }
});

function updateFileName(fileName) {
    const uploadZone = document.querySelector('.upload-zone');
    uploadZone.innerHTML = `
        <div style="font-size: 48px; margin-bottom: 15px;">✅</div>
        <h3>File Selected: ${fileName}</h3>
        <p>Click submit to process your bulk order</p>
    `;
}
</script>
{% endblock %}