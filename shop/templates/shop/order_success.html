{% extends "base.html" %}
{% load static %}

{% block title %}Order Placed Successfully - Gadget Shop{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/amazon-style.css' %}">
{% endblock %}

{% block content %}
<div class="amazon-container">
  <!-- Success Header (Order Success Page) -->
  <div class="order-success-header">
    <div class="order-success-emoji">✅</div>
    <h1 class="order-success-title">Order Placed Successfully!</h1>
    <p class="order-success-desc">
      Thank you for your order. We'll send you shipping confirmation when your item(s) are on the way!
    </p>
  </div>

  <!-- Order Details (Order Success Page) -->
  <div class="order-success-details-container">
    <div class="order-success-details-box">
      <h2 class="order-success-details-title">Order Details</h2>
      <div class="order-success-details-grid">
        <div>
          <div class="order-success-detail-row">
            <strong>Order Number:</strong> #{{ order.id }}
          </div>
          <div class="order-success-detail-row">
            <strong>Status:</strong> <span class="order-success-status">{{ order.get_status_display }}</span>
          </div>
          <div class="order-success-detail-row">
            <strong>Order Date:</strong> {{ order.created_at|date:"F j, Y" }}
          </div>
          <div class="order-success-detail-row">
            <strong>Total Amount:</strong> ₹{{ order.total_amount|floatformat:2 }}
          </div>
          <div class="order-success-detail-row">
            <strong>Payment Method:</strong> {{ order.payment_method }}
          </div>
        </div>
        <div>
          <div class="order-success-detail-row">
            <strong>Status:</strong>
            <span class="order-success-status-badge">{{ order.get_status_display }}</span>
          </div>
          <div class="order-success-detail-row">
            <strong>Estimated Delivery:</strong> {{ estimated_delivery|date:"F j, Y" }}
          </div>
          {% if order.tracking_number %}
          <div class="order-success-detail-row">
            <strong>Tracking Number:</strong> {{ order.tracking_number }}
          </div>
          {% endif %}
        </div>
      </div>

      <!-- Delivery Address (Order Success Page) -->
      <div class="order-success-address-box">
        <h3 class="order-success-address-title">Delivery Address</h3>
        <div>
          <strong>{{ order.customer_name }}</strong><br>
          {{ order.address }}<br>
          {{ order.city }}, {{ order.state }} {{ order.postal_code }}<br>
          {{ order.country }}<br>
          {% if order.phone_number %}
          Phone: {{ order.phone_number }}
          {% endif %}
        </div>
      </div>

      <!-- Order Items (Order Success Page) -->
      <div>
        <h3 class="order-success-items-title">Items Ordered</h3>
        {% for item in order.items.all %}
          <div class="order-success-item-row">
            <img src="{% if item.product.image %}{{ item.product.image.url }}{% else %}https://via.placeholder.com/80x80?text=No+Image{% endif %}"
                 alt="{{ item.product.name }}"
                 class="order-success-item-img"
                 onerror="this.src='https://via.placeholder.com/80x80?text=No+Image'">
            <div class="order-success-item-info">
              <div class="order-success-item-name">{{ item.product.name }}</div>
              <div class="order-success-item-meta">
                Quantity: {{ item.quantity }}
              </div>
              <div class="order-success-item-meta">
                Price: ₹{{ item.price|floatformat:2 }} each
              </div>
            </div>
            <div class="order-success-item-cost">
              ₹{{ item.get_cost|floatformat:2 }}
            </div>
          </div>
        {% endfor %}
        <div class="order-success-total">
          Total: ₹{{ order.get_total_cost|floatformat:2 }}
        </div>
      </div>
    </div>

    <!-- Action Buttons (Order Success Page) -->
    <div class="order-success-actions">
      <div class="order-success-actions-row">
        <a href="{% url 'shop:track_order' order.id %}" class="amazon-btn amazon-btn-primary order-success-action-btn">
          Track Your Order
        </a>
        <a href="{% url 'products:product_list' %}" class="amazon-btn amazon-btn-secondary order-success-action-btn">
          Continue Shopping
        </a>
        <a href="{% url 'shop:home' %}" class="amazon-btn amazon-btn-secondary order-success-action-btn">
          Back to Home
        </a>
      </div>
    </div>

    <!-- What's Next (Order Success Page) -->
    <div class="order-success-next-box">
      <h3 class="order-success-next-title">What happens next?</h3>
      <ul class="order-success-next-list">
        <li>We'll send you an email confirmation shortly</li>
        <li>Your order will be processed and packed within 1-2 business days</li>
        <li>You'll receive tracking information once your order ships</li>
        <li>Estimated delivery: 3-5 business days</li>
      </ul>
    </div>
  </div>
</div>
{% endblock %}