{% extends "base.html" %}
{% load static %}
{% block title %}Products - Gadget Shop{% endblock %}
{% block content %}
  <h1>All Gadgets</h1>

  {% if products %}
    <style>
      .product-grid {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
      }
      .product-card {
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 15px;
        width: 220px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .product-card img {
        max-width: 100%;
        height: 150px;
        object-fit: contain;
        margin-bottom: 10px;
      }
      .product-name {
        font-weight: 600;
        margin-bottom: 5px;
        text-align: center;
      }
      .price {
        color: #2c7a7b;
        font-weight: 700;
        margin-bottom: 10px;
      }
      .btn-group {
        display: flex;
        gap: 10px;
      }
      .btn-group form {
        margin: 0;
      }
      button {
        background-color: #3182ce;
        border: none;
        color: white;
        padding: 6px 12px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.9rem;
      }
      button:hover {
        background-color: #2c5282;
      }
    </style>

    <div class="product-grid">
      {% for product in products %}
        <div class="product-card">
          {% if product.image %}
            <img src="{{ product.image.url }}" alt="{{ product.name }}">
          {% else %}
            <img src="{% static 'default-product.png' %}" alt="No Image Available">
          {% endif %}
          <div class="product-name">
            <a href="{% url 'shop:product_detail' product.id product.slug %}">{{ product.name }}</a>
          </div>
          <div class="price">â‚¹{{ product.price }}</div>

          <div class="btn-group">
            <form action="{% url 'shop:add_to_cart' product.id %}" method="post">
              {% csrf_token %}
              <input type="hidden" name="qty" value="1">
              <button type="submit">Add to Cart</button>
            </form>
            <form action="{% url 'shop:add_to_cart' product.id %}?next=checkout" method="post">
              {% csrf_token %}
              <input type="hidden" name="qty" value="1">
              <button type="submit">Buy</button>
            </form>
          </div>
        </div>
      {% endfor %}
    </div>

  {% else %}
    <p>No products found.</p>
  {% endif %}
{% endblock %}
