{% extends "base.html" %}
{% load static %}
{% block title %}All Gadgets{% endblock %}
{% block content %}
<h1>All Gadgets</h1>

<div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:18px;">
  {% for product in products %}
  <div style="border:1px solid #e5e7eb;border-radius:10px;padding:16px;text-align:center;">
    {% if product.image %}
      <img src="{{ product.image.url }}" alt="{{ product.name }}" style="width:200px;height:200px;object-fit:contain;">
    {% else %}
      <img src="{% static 'img/no-image.png' %}" alt="No Image Available" style="width:200px;height:200px;object-fit:contain;">
    {% endif %}
    <p style="margin-top:10px;"><a href="{{ product.get_absolute_url }}"><strong>{{ product.name }}</strong></a></p>
    <p>â‚¹{{ product.price }}</p>

    <form method="post" action="{% url 'shop:add_to_cart' product.id %}" style="display:inline-block;margin-right:6px;">
      {% csrf_token %}
      <input type="hidden" name="quantity" value="1">
      <button type="submit">Add to Cart</button>
    </form>

    <form method="post" action="{% url 'shop:buy_now' product.id %}" style="display:inline-block;">
      {% csrf_token %}
      <button type="submit">Buy</button>
    </form>
  </div>
  {% empty %}
    <p>No products.</p>
  {% endfor %}
</div>
{% endblock %}
